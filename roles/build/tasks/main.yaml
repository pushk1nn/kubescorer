---

# Deploy HTTP scorechecks
- include_tasks: roles/build/tasks/run.yaml
  vars:
    service: http
    host: "{{ item.1.name }}"
    team: "{{ item.0 }}"
  loop: "{{ query('cartesian', range(1, teams + 1) | list, services['http']) }}"

# Deploy MySQL scorechecks
- include_tasks: roles/build/tasks/run.yaml
  vars:
    service: mysql
    host: "{{ item.1.name }}"
    team: "{{ item.0 }}"
  loop: "{{ query('cartesian', range(1, teams + 1) | list, services['mysql']) }}"

# Deploy k3s scorechecks
- include_tasks: roles/build/tasks/run.yaml
  vars:
    service: k3s
    host: "{{ item.1.name }}"
    team: "{{ item.0 }}"
  loop: "{{ query('cartesian', range(1, teams + 1) | list, services['k3s']) }}"

# Deploy AD scorechecks
- include_tasks: roles/build/tasks/run.yaml
  vars:
    service: ad
    host: "{{ item.1.name }}"
    team: "{{ item.0 }}"
  loop: "{{ query('cartesian', range(1, teams + 1) | list, services['ad']) }}"

# Deploy chat scorechecks
- include_tasks: roles/build/tasks/run.yaml
  vars:
    service: chat
    host: "{{ item.1.name }}"
    team: "{{ item.0 }}"
  loop: "{{ query('cartesian', range(1, teams + 1) | list, services['chat']) }}"

# Deploy WinRM scorechecks
- include_tasks: roles/build/tasks/run.yaml
  vars:
    service: winrm
    host: "{{ item.1.name }}"
    team: "{{ item.0 }}"
  loop: "{{ query('cartesian', range(1, teams + 1) | list, services['winrm']) }}"